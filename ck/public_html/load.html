<!DOCTYPE html>
	<html>
		<head>
			<link href="css/main.css" rel="stylesheet">
			<link href="css/jqueryFileTree.css" rel="stylesheet">
			<script src="lib/jquery.js" type="text/javascript"></script>
			<script src="lib/jquery.easing.js" type="text/javascript"></script>
			<script src="lib/jqueryFileTree.js" type="text/javascript"></script>
			<script src="/ace-builds/src/ace.js" type="text/javascript" charset="utf-8"></script>
			<script type="text/javascript">
				$(document).ready(function(){
					// Ace Editor Object - Ace for Opensource Web Editor

					var queryString = function () {
						var query_string = {};
						var query = window.location.search.substring(1);
						var vars = query.split("&");

						for (var i=0;i<vars.length;i++) {
							var pair = vars[i].split("=");
							
							// If first entry with this name
							if (typeof query_string[pair[0]] === "undefined") {
								query_string[pair[0]] = pair[1];

							// If second entry with this name
							} else if (typeof query_string[pair[0]] === "string") {
								var arr = [ query_string[pair[0]], pair[1] ];
								query_string[pair[0]] = arr;

							// If third or later entry with this name
							} else {
								query_string[pair[0]].push(pair[1]);
							}
						}

						return query_string;
					} ();
					
					var editor;
					
					// Using jQuery File Tree - fileTree({root : root dir, script : serverside file}, callback func when chosing file})
					$('#dirtree').fileTree({ root: '/' + queryString.project + '/' , script: 'jqueryFileTree_srv.js' }, function(file) { 
						// When file opening...send data to server with 'post'
						$.post('openFile', {path : file}, function(data){
							
							editor = null;
							// create Ace Editor
							editor = ace.edit("texteditor");
							// settings for Ace Editor
							editor.setTheme('ace/theme/monokai');
							editor.setShowPrintMargin(false);
							editor.getSession().setMode("ace/mode/java");
							document.getElementById("texteditor").style.fontSize = "15px";
							
							// Change Values when choosing other file
							editor.setValue(data, 1);
							//console.log(editor.getValue());
						});
					});
				});
			</script>
		</head>
		
		<body>
			<div id="container">
				<div id="dirtree"></div>	
				<div id="texteditor"></div>	
			</div>
		</body>
	</html>